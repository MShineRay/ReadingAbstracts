<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Title</title>
        </head>
        <body>
        
                    

                    
                    
                    
                    <p style="padding-top: 7px;padding-bottom: 7px;color: rgb(68, 68, 68);font-size: 14px;line-height: 1.8;"><br></p><blockquote style="box-sizing: border-box;margin-top: 1em;margin-bottom: 1em;padding: 15px 15px 15px 1rem;color: rgb(129, 145, 152);border-left-width: 6px;border-left-color: rgb(220, 230, 240);font-size: 0.9em;line-height: inherit;background: rgb(242, 247, 251);overflow: auto;word-wrap: normal;word-break: normal;white-space: normal;"><p style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">“程序是写给人读的，只是偶尔让计算机执行一下。”<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">——Donald Ervin Knuth（高德纳）</p></blockquote><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">指代码写的是否优雅美观可维护。</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">绝
对完美的代码是不存在的，代码素养并不是指完美主义。在翻译领域有“信，达，雅”的标准，“雅”之所以放在最后，是因为要达到它，需要有比较高的水准和经
验积累。类比到编程领域，我们在编程时，第一时间想到的是如何将业务逻辑实现出来，而不是如何把代码优雅地写出来，所以写代码没有所谓的绝对优雅。但是，
作为一名专业的前端工程师，确切的说，应该是专业的软件工程师，编写优雅的代码应当是时刻保持的追求，它更像是一个准绳，如同每个人知道自己该做什么，不
该做什么，所谓原则，所谓底线，体现出所谓的“代码素养”。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">破窗理论</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">破窗理论，原义指窗户破损了，建筑无人照管，人们放任窗户继续破损，最终自己也参与破坏活动，在外墙上涂鸦，任垃圾堆积，最后走向倾颓。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">破窗理论在实际中非常容易出现，往往第一个人的代码写的不好，第二个人就会有类似“反正他已经写成这样了，那我也只能这样了”的思想，导致代码越维护越冗杂，最后一刻轰然坍塌，变成无人想去维护的垃圾。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">整洁的代码</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">整洁的代码如同优美的散文，试想读过的一本好书，能够随着作者的笔锋跌宕起伏，充满了画面感，调动了自己的喜怒哀乐。代码虽然没有那样的高潮迭起，但整洁的代码应当充满张力，能够在某一时刻利用这种张力将情节推向高潮。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">我更喜欢把写代码类比于写文章讲故事，写代码是创作的过程，作者需要将自己想表达的东西通过代码的形式展现出来，而整洁的代码如同讲故事一般，娓娓道来，引人入胜，不好的代码则让人感觉毫无头绪，通篇不知道在讲什么。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">整洁代码原则</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">在现代化的前端开发中，有很多自动化工具可以帮助我们写出规范的代码，如eslint，tslint等各种辅助校验工具，知名的规范如google规范、airbnb规范等等也从各个细节方面约束，帮助我们形成合理规范的代码风格。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">本小节不再重复语言层面的代码风格，根据实际重构项目，总结出一系列开发过程中需要时刻注意的原则，按照重要程度优先级排列。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">1. DRY(Don't Repeat Yourself)</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">相信作为一名软件工程师，大家都听说过最基本的DRY原则，很多设计模式，包括面向对象本身，都是在这条原则上做努力。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">DRY
顾名思义，是指“不要重复自己”，它实际上强调了一个抽象性原则，如果同样或类似的代码片段出现了两次以上，那么应该将它抽象成一个通用方法或文件，在需
要使用的地方去依赖引入，确保在改动的时候，只需调整一处，所有的地方都改变过来，而不是到每个地方去找到相应的代码来修改。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">在实际工作中，我见过两种在这条原则上各自走向极端的代码：</p><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">一
种是完全没有抽象概念，重复的代码散落在各处，更奇葩的是，有一部分的抽象，但更多的是重复，比如在common下抽取了一个data.js的数据处理文
件，部分页面中引用了该文件，而更多页面完全拷贝了该文件中的几个不同方法代码。而作者的意图则是令人啼笑皆非——只用到小部分代码，没必要引入那么整个
文件。且不论现代化的前端构建层面可以解决这个问题，即使是引入了整个大文件，这部分多余的代码在gzip之后也不会损失多少性能，但这种到处copy的
行为带来后续的维护成本是翻倍的。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">对
于这种行为还遇到另外一个理由，就是工期时间短，改不动之前的代码，怕造成外网问题，那就拷贝一份相同的逻辑来修改。比如支付逻辑，原有的逻辑为单独的
UI浮层+单个支付购买，现在产品提出“打包购买”需求，原有的代码逻辑又比较复杂，出现了“改不动”的现象，于是把UI层和购买逻辑的几个文件整个拷贝
过来，修改几下，形成了新的“打包购买”模块，后来产品又提出“按条购买”，按照上述”改不动“原则，又拷贝了一份“按条购买”的模块。这样一来调用处的
逻辑就会冗余重复，需要根据不同的购买方式引入不同UI组件和支付逻辑，另外如果新添需求，如支持“分期付款”，那么将改动的是非常多的文件，最可悲的
是，最后想要把代码重构为一处统一调用的人，将会面对三份“改不动”的压力，需要众多逻辑中对比分析提取相同之处，工作量已经不能用翻倍来衡量，而这种工
作量往往无法得到产品的认同和理解。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">另一种极端是过度设计，在写每个逻辑的时候都去抽象，让代码的可读性大大下降，一个简单的for循环都要复用，甚至变量定义，这种代码维护起来也是比较有成本的，还有将迥然不同的逻辑过度抽象，使得抽象方法变得非常复杂，经常“牵一发而动全身”，这种行为也是不可取的。</p><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">这也是将该原则排在首位的原因，这种行为导致的重构工作量是最大的，保持良好的代码维护性是一种素养，更是一种责任，如果自己在这方面逃避或偷懒，将把这块工作量翻倍地加在将来别人或自己的身上。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">2. SRP(Single Responsibility Principle)</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">SRP也是一个比较著名的设计原则——单一职责，在面向对象的编程中，认为类应该具有单一职责，一个类的改变动机应当只有一个。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">对
于前端开发来说，最需要贯彻的思想是函数应当保持单一职责，一个函数应当只做一件事，这样一来是保证函数的可复用性，更单一的函数有更强的复用性，二来可
以让整体的代码框架更加清晰，细节都封装在一个个小函数中。另外一点也和单一职责有关，就是无副作用的函数，也称纯函数，我们应当尽量保证纯函数的数量，
非纯函数是不可避免的，但应当尽量减少它。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">把
SRP原则排在第二位，因为它非常的重要，没有人愿意看一团乱麻的逻辑，在维护代码时，如果没有一个清晰的逻辑结构，所有的数据定义、数据处理、DOM操
作等等一系列细节的代码全部放在一个函数中，导致这个函数非常的冗长，让人本能地产生心理排斥，不愿去查看内部的逻辑。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">所有的复杂逻辑放在一个函数中，相信大家看到这样的代码都会眉头一皱:</p><pre style="box-sizing: border-box;margin-top: 0px;margin-bottom: 0px;padding: 0px;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;background-color: rgb(255, 255, 255);"><code class="" style="box-sizing: border-box;padding: 0.5em;font-size: 14px;color: rgb(220, 220, 220);line-height: 18px;font-family: Consolas, Inconsolata, Courier, monospace;display: block;overflow-x: auto;letter-spacing: 0px;background: rgb(30, 30, 30);word-wrap: normal !important;word-break: normal !important;overflow-y: auto !important;">show: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(a, b)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (!isInit) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;init();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isInit = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">true</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// reset</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;this.balance = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">0</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;this.isAllBalance = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> shouldShowLayer = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">true</span>,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;preSelectedTermId = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">0</span>,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;needAddress = course.address_state, <br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showTerms,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;termsObj;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> hasPunish = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;this.course = course = course || {};<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;opt = opt || {};<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;opt.showMax = opt.showMax || <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">6</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;(isIosApp || b.isIAP) &amp;&amp; (usekedian = !<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">0</span>, priceSymbol = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'&lt;i class="icon-font i-kedian"&gt;&lt;/i&gt;'</span>), <br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;f.splice(b.showMax), layer.show({<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;$container:b.$container,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;content:termSelectorTpl({<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;terms:f,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;curTermId:b.curTermId || d,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;name:a.name,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hasPunish:h,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;userInfo:j<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;}, {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;renderTime:T.render.time.renderCourseTime,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;renderCourseTime:renderCourseTime,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hideUserInfo:b.hideUserInfo,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hideTitle:b.hideTitle,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hidePayPrice:b.hidePayPrice,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;confirmText:b.confirmText,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sys_time:a.sys_time<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;}),<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;cls:<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">"term-select-new"</span>,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;allowMove:<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(a)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> opt.allowMove || ($target.closest(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.select-content'</span>).length &amp;&amp;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term-select-new .select-time'</span>).height() +<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term-select-new .select-address'</span>).height() +<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term-select-new .select-discounts'</span>).height() &gt; (winWidth &gt; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">360</span> ? <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">190</span> : winWidth &gt; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">320</span> ? <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">175</span> : <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">150</span>));<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;afterInit:<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(c)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (needAddress) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.loadAddress();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 如果需要地址，且是 app 的话，屏幕可见性切换时需要更新下地址</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (isApp) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(document).on(visibilityChange, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span> <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(e)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// console.log('visibilityChange',document[hidden]);</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (!document[hidden]) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// true 参数表示必须刷新</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.loadAddress(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">true</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.afterTermSelect();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$dom.on(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'click'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.layer-close'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">()</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setTimeout(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">()</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;!opt.noAutoHide &amp;&amp; layer.hide();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">100</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;opt.onCancel &amp;&amp; opt.onCancel();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$dom.on(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'click'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(e)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span> = $(this);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> $terms = $(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (!<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span>.hasClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'disabled'</span>)) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$terms.removeClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'selected'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span>.addClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'selected'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.afterTermSelect();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$dom.on(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'click'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.layer-comfirm'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(e)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span> = $(this);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> termId = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term.selected'</span>).data(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'term-id'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> termName = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term.selected'</span>).find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term-title'</span>).html();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> discountId = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.discounts-list_item.selected'</span>).data(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'discount-id'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> couId = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.discounts-list_item.selected .discounts-coupon'</span>).data(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'cou-id'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> directPay = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>; <br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// ios 手Q IAP</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (that.toRecharge) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 需要充值的金额数目</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> toRechargePrice = that.curPrice - that.balance;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (isIosApp) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">require</span>.async(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'api'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span> <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(api)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;api.invoke(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'api'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'balanceRecharge'</span>, {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;amount: toRechargePrice<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 充值完成设置回调</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;api.addEventListener(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'balanceRechargeCallBack'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(data)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 支付成功的话</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// code=0为成功，其他表示失败</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// mode=1表示走充值档位回调，2表示直接充值回调,如果ios 直接充值成功则直接支付</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> directPay = data.code === <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">0</span> &amp;&amp; data.mode === <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">2</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 执行回调刷新数据</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.toGetBalance(that.course, termId, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">()</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;directPay &amp;&amp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span>.trigger(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'click'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">else</span> {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> toRechargePrice = that.curPrice - that.balance;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (that.rechargeMap &amp;&amp;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Object.keys(that.rechargeMap).indexOf(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">""</span> + toRechargePrice) &gt; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">-1</span>) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.opt.onComfirmClick &amp;&amp; that.opt.onComfirmClick(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">1</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;iosPay.iosRecharge({<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;productId: that.rechargeMap[toRechargePrice],<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;count: toRechargePrice,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;succ: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">()</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.toGetBalance(that.course, $(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term.selected'</span>).data(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'term-id'</span>));<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">else</span> {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.opt.onComfirmClick &amp;&amp; that.opt.onComfirmClick(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">2</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// T.jump('/iosRecharge.html?_bid=167&amp;_wv=2147483651');</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.jumpPage(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'/iosRecharge.html?_bid=167&amp;_wv=2147483651'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (!termId) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">require</span>.async([<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'modules/tip/tip'</span>], <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(Tip)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Tip.show(opt.dialogTitle);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">true</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// check address</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (needAddress &amp;&amp; !that.addressid) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (course.must_fill_mailing || !$dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.select-address'</span>).hasClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'z-no'</span>)) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 没填地址的话地址框要标红，然后需要滑到视窗让用户看到</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> $cnt = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.select-content'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> $addressWrap = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.select-address_wrapper'</span>).addClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'z-err'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> cntRect = $cnt[<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">0</span>].getBoundingClientRect();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> addressBoxRect = $addressWrap[<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">0</span>].getBoundingClientRect();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// console.log('&gt;&gt;&gt;&gt;&gt; ', cntRect, addressBoxRect);</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (addressBoxRect.bottom &gt; cntRect.bottom) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$cnt.scrollTop($cnt.scrollTop() + (addressBoxRect.bottom - cntRect.bottom));<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (that.isAllBalance &amp;&amp; that.opt.onComfirmClick) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.opt.onComfirmClick(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">3</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;opt.cb &amp;&amp; opt.cb(termId, discountId, couId, termName, that.isAllBalance, that.payBalance, that.addressid);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;setTimeout(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">()</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;!opt.noAutoHide &amp;&amp; layer.hide();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">300</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$dom.on(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'click'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.discounts-list_item'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(e)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span> = $(this);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> $discounts = $(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.discounts-list_item'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> isSelected = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span>.hasClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'selected'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (!<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span>.hasClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'disabled'</span>)) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$discounts.removeClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'selected'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">$this</span>.addClass(isSelected ? <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">''</span> : <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'selected'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.setPayPrice();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$dom.on(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'click'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.address-person .i-edit2, .address-add'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">()</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> termId = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.term.selected'</span>).data(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'term-id'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> courseId = that.course.cid;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> src = <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'/addrEdit.html?_bid=167&amp;_wv=2147483649&amp;ns=1&amp;fr='</span> + (location.pathname.indexOf(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'allCourse.html'</span>) &gt; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">-1</span> ?<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">4</span> : location.pathname.indexOf(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'courseDetail.html'</span>) &gt; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">-1</span> ? <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">2</span> : <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">3</span>) + <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'&amp;course_id='</span> + courseId + <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'&amp;term_id='</span> + termId;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// T.jump(src);</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.jumpPage(src);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}).on(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'click'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.select-address_title .i-right-light'</span>, <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">(e)</span> </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> $addressDom = $dom.find(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.select-address'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> isOpen = !$addressDom.hasClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'z-no'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (isOpen) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$addressDom.addClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'z-no'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.theAddressid = that.addressid;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.addressid = undefined;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">else</span> {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$addressDom.removeClass(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'z-no'</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that.addressid = that.theAddressid;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;} <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">else</span> {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;opt.cb &amp;&amp; opt.cb(opt.curTermId || preSelectedTermId);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></code></pre><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">单一职责并不一定要通过很多函数来完成，也可以用分段达到目的，如同这样：</p><pre style="box-sizing: border-box;margin-top: 0px;margin-bottom: 0px;padding: 0px;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;background-color: rgb(255, 255, 255);"><code class="" style="box-sizing: border-box;padding: 0.5em;font-size: 14px;color: rgb(220, 220, 220);line-height: 18px;font-family: Consolas, Inconsolata, Courier, monospace;display: block;overflow-x: auto;letter-spacing: 0px;background: rgb(30, 30, 30);word-wrap: normal !important;word-break: normal !important;overflow-y: auto !important;">show(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span>) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span> &amp;&amp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.setData(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span>);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;const renderData = {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span>: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span>,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;courseData: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span>.courseData,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;termList: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.termList,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;userInfo: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.userInfo,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;addrList: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.addrList,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;isIAP: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.isIAP,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;balance: betterDisplayNum(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.balance),<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;curPrice: betterDisplayNum(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.curPrice),<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;curTermId: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.curTermId,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;discountList: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.discountList,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;curDisId: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.curDisId,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;jdSelectId: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.jdSelectId,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;curAddrId: <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.curAddrId<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;};<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;const formatters = {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// formatters</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;termFormatter,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;priceFormatter,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;okBtnFormatter,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;balanceFormatter,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;priceFormatterWithDiscount<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;};<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;console.log(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'[render data]: '</span>, renderData);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;const html = payLayerTpl(renderData, formatters);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 记录滚动条位置</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>._setScrollTop();<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 防止重复append</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.$view) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.$view.replaceWith(html);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;} <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">else</span> {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.$container.append(html);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;afterUIRender(() =&gt; {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>.$view = $(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'.'</span> + COMPONENT_NAME).show(); &nbsp; &nbsp; &nbsp; &nbsp;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>._setContentHeight(); &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 动态设置滚动区域的高度</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>._restoreScrollTop(); <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 恢复滚动位置</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>._initEvent(); &nbsp; <br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">this</span>._initCountDown(); &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 限时折扣倒计时 &nbsp; &nbsp; &nbsp; &nbsp; </span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></code></pre><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">虽然这个函数也没有维持单一职责，但通过“分段”的形式清晰的表明了内部的流程逻辑，这样的代码看起来就会比所有细节揉在一个函数中好很多。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">对
于单一职责来说，保持起来还是比较困难的，主要在于职责的拆分，有时过于细致的职责拆分也会给阅读带来比较大的困难，对于这种情况，还是拿写作来对比，单
一职责相当于文章的一个“段落”，对于文章来说，每个段落都有它的中心思想，可以用一句话描述出来，如果你发现函数的中心思想很模糊，或者需要很多语言去
描述它，那也许它已经有很多个职责该拆分了。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">3. LKP(Least Knowledge Principle)</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">LKP原则是最小知识原则，又称“迪米特”法则，也就是说，一个对象应该对另一个对象有最少的了解，你内部如何复杂都没关系，我只关心调用的地方。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">保持暴露接口的简介易用性也是API设计的通用规则，在实际中发现了这样的一个UI组件：</p><pre style="box-sizing: border-box;margin-top: 0px;margin-bottom: 0px;padding: 0px;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;background-color: rgb(255, 255, 255);"><code class="" style="box-sizing: border-box;padding: 0.5em;font-size: 14px;color: rgb(220, 220, 220);line-height: 18px;font-family: Consolas, Inconsolata, Courier, monospace;display: block;overflow-x: auto;letter-spacing: 0px;background: rgb(30, 30, 30);word-wrap: normal !important;word-break: normal !important;overflow-y: auto !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(78, 201, 176);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">module</span>.exports = {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">show</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">course, opt</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">jumpPage</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">url</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">afterTermSelect</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">setPrice</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">setBalance</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">toGetBalance</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">course, curTermId, cb</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">setDiscounts</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">course, curTermId, curPrice</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">filterDiscounts</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">discounts, curPrice</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">isSuitCoupon</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">cou, curPrice</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">setPayPrice</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">setTermTips</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">wording</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">loadAddress</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">needUpdate</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">setAddress</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">addressid</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 此处省略一堆逻辑</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></code></pre><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">这个UI组件暴露了非常多的方法，有业务逻辑，有视图逻辑，还有工具方法，这时会给维护者带来比较大的困扰，本能的以为这些暴露出去的方法都在被使用，所以想重构其中某些方法都有些不好下手，而实际上，外部调用的方法仅仅是show而已。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">一个好的封装，无论内部多么复杂，它暴露出来的一定是最简洁实用的接口，而内部逻辑是独立维护的，如上述代码，作为一个UI组件来说，提供最基本的show/hide方法即可，有必要时可加入update方法自更新，而无需暴露众多细节，造成调用者和维护者的困扰。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">4. 可读性基本定理</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">可读性基本定理——“代码的写法应当使别人理解它所需的时间最小化”。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">代码风格和原则不是一概而论的，我们经常需要对一些编码原则和方案进行取舍，例如对于三元表达式的取舍，当我们觉得两种方案都占理时，那么唯一的评判标准就是可读性基本定理，无论写法多么的高超炫技，最好的代码依旧是让人第一时间能够理解的代码。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">5. 有意义的名称</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">代码的可读性绝大部分依赖于变量和函数的命名，一个好的名称能够一针见血地帮助维护者理解逻辑，如同写文章中的“文笔”，文笔优异者总能将故事娓娓道来，引人入胜。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">不
过要起好名称还是很难的，尤其是我们不是以英语为母语，更是添加了一层障碍，有些人认为纠结在名称上会导致效率变低，开发第一时间应该完成需求的开发。这
样说并没有错，我们在开发过程中应当专注于功能逻辑，但不要完全忽视命名，所谓“文笔”是需要锻炼的，思考的越多，命名就会愈加的水到渠成，到后来也就不
太会影响工作效率了。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">在这里推荐鲍勃大叔提到的童子军规，每一次看自己的代码，都进行一次重构，最简单的重构便是改名，也许一开始觉得命名还比较贴合，但逻辑越写越不符合初始的命名了，当回顾代码时，我们可以顺手对变量和方法进行重新命名，现代编辑工具也很容易做到这一点。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">文不对题的命名是最可怕的，如：</p><pre style="box-sizing: border-box;margin-top: 0px;margin-bottom: 0px;padding: 0px;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;background-color: rgb(255, 255, 255);"><code class="" style="box-sizing: border-box;padding: 0.5em;font-size: 14px;color: rgb(220, 220, 220);line-height: 18px;font-family: Consolas, Inconsolata, Courier, monospace;display: block;overflow-x: auto;letter-spacing: 0px;background: rgb(30, 30, 30);word-wrap: normal !important;word-break: normal !important;overflow-y: auto !important;"><span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span> <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">checkTimeConflict</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">opts</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (opts.param.passcard || (T.bom.get(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'autopay'</span>) &amp;&amp; T.bom.get(<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(214, 157, 133);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">'term_id'</span>))) { <br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;selectToPay({<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">result</span>: {}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;}, opts);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;} <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">else</span> {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;DB.checkTimeConflict({<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">param</span>: {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">course_id</span>: opts.param.courseId,<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">term_id</span>: opts.param.termId<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">succ</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;selectToPay(data, opts);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(156, 220, 254);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">err</span>: <span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">function</span>(<span class="" style="box-sizing: border-box;font-size: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">data</span>) </span>{<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dealErr(opts, data);<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;});<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></code></pre><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">这个函数被命名为check*开头的，本意是检测课程时间是否冲突，但内部逻辑却包含了支付整个流程，此时对于调用者来说，如果不去细看内部逻辑，很有可能就会错误的认为check函数没有副作用导致事故发生。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">6. 适当的注释维护</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">注释是一个比较有争议性的话题，有人认为可读的函数变量就很清晰，不需要额外的注释，且注释有不可维护性，如：</p><pre style="box-sizing: border-box;margin-top: 0px;margin-bottom: 0px;padding: 0px;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;background-color: rgb(255, 255, 255);"><code class="" style="box-sizing: border-box;padding: 0.5em;font-size: 14px;color: rgb(220, 220, 220);line-height: 18px;font-family: Consolas, Inconsolata, Courier, monospace;display: block;overflow-x: auto;letter-spacing: 0px;background: rgb(30, 30, 30);word-wrap: normal !important;word-break: normal !important;overflow-y: auto !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 1-PC, 2-android手QH5, 3-android APP, 4-ios&amp;非手QH5, 5-IOS APP</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"><span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">var</span> platform = isAndroidApp ? <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">3</span> : isIosApp ? <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">5</span> : <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(184, 215, 163);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">4</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></code></pre><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">实际上，这个字段的含义早已发生了改变，但由于修改者只修改了逻辑，并没有注意到这一行注释，导致这个老注释提供了错误信息，此时的注释不仅变成了无效注释，甚至会导致维护人的误解，造成bug的产生。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">对于这种情况，要么维护注释，要么在注释里面注明接口文档，维护文档，在其他情况下，适当的注释是有必要的，对于复杂的逻辑，如果有一个简练的注释，对于代码可读性的帮助是极大的，但有些不必要的注释可以去掉，注释的取舍关键在于可读性基本定理，如：</p><pre style="box-sizing: border-box;margin-top: 0px;margin-bottom: 0px;padding: 0px;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;background-color: rgb(255, 255, 255);"><code class="" style="box-sizing: border-box;padding: 0.5em;font-size: 14px;color: rgb(220, 220, 220);line-height: 18px;font-family: Consolas, Inconsolata, Courier, monospace;display: block;overflow-x: auto;letter-spacing: 0px;background: rgb(30, 30, 30);word-wrap: normal !important;word-break: normal !important;overflow-y: auto !important;">const filterFn = (term) =&gt; {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (rule.hideEndTerms &amp;&amp; term.is_end) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>; &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 隐藏已结束的期</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (rule.hideSignEndTerms &amp;&amp; term.is_out_of_date) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>; &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 隐藏已结束报名的期</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (rule.hideAppliedTerms &amp;&amp; courseUtil.isTermApplied(term)) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>; &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 隐藏已报名的期</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (rule.hideZeroAllowedTerms &amp;&amp; courseUtil.isTermZero(term)) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>; &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 隐藏名额已满的期</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">if</span> (rule.productType === productType.PACKAGE) {<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">false</span>; &nbsp; <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(87, 166, 74);line-height: inherit;font-style: italic;word-wrap: inherit !important;word-break: inherit !important;">// 隐藏课程包的班级</span><br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;}<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"> &nbsp; &nbsp;<span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">return</span> <span class="" style="box-sizing: border-box;font-size: inherit;color: rgb(86, 156, 214);line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">true</span>;<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;">};<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;word-wrap: inherit !important;word-break: inherit !important;"></code></pre><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">对于上述逻辑来说，虽然通过变量可以大致猜出功能含义，但一眼看上去就能清晰掌握逻辑结构，归功于注释的简明与清晰。</p><h3 style="box-sizing: border-box;margin-top: 0.8em;margin-bottom: 0.8em;font-weight: bold;font-size: 1.3em;color: rgb(21, 153, 87);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">小结</span></h3><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">本
文提到的6个代码编写的原则，前三个偏向于代码维护性，后三个偏向于代码可读性，整个可维护性和可读性构成了代码的基本素养。作为一名前端开发工程师，想
要拥有良好的代码素养，首先要让自己的代码可维护，不给别人的维护带来巨大的成本和工作量，其次尽量保证代码的美观可读，整洁的代码人见人爱，如同阅读一
本好书，令人心情愉悦。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">”
代码素养“是一种态度，真正热爱编程的程序员一定不会缺失“代码素养”。我们通常称“写代码”为“程序设计”，而不是“程序编写”，“设计”一词体现出了
我们的代码是一件作品，也许不如“艺术品”那么精致，但也不是什么粗麻烂布，如果在写代码时天马行空，得过且过，抱着只要能实现功能的思想，那这部“作品
“是不具有观赏价值的，这不仅仅体现出代码编写者的”不专业”，更是反映出对待编程这件事的态度，代码的整洁程度、可维护性取决于你是否真正“在意”你的
代码，每个程序员不一定热爱编程，但请你一定要以“认真”的态度对待自己的专业。<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;"><code style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">"clean code"</code>的作者鲍勃大叔提到，有人曾送给他一条腕带，上面写着“Test Obsessed”，他发觉自己带上后再也无法取下了，不仅是因为腕带很紧，更是因为它也是一条精神上的紧箍咒。在编程时，我们下意识的看下自己的手腕，是否能发现一条隐形的腕带呢？</p><blockquote><p style="box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;font-size: 16px;color: rgb(62, 62, 62);line-height: inherit;white-space: normal;background-color: rgb(255, 255, 255);">作者：KianM<br style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;">https://juejin.im/post/5af18dff518825671c0e8469</p></blockquote><section class="" data-tools="135编辑器" data-id="87989" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section class="" data-tools="135编辑器" data-id="87989" style="max-width: 100%;box-sizing: border-box;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section class="__bg_gif" data-order="0" style="padding: 30px;max-width: 100%;box-sizing: border-box;border-width: 3px;border-style: double;border-color: rgb(145, 44, 238);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_gif/cZV2hRpuAPjTw2iacM6RJGggO7nTficztvMrrFT6d8NaeExPXJllNbrdTnibB8Jnuwcfcp0599X9g5aGmPDlADN3w/640&quot;);word-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 20px;color: rgb(216, 79, 169);box-sizing: border-box !important;word-wrap: break-word !important;">Vue中文社区</span><span style="max-width: 100%;color: rgb(0, 128, 255);font-size: 20px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span><span style="max-width: 100%;color: rgb(0, 128, 255);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;">独家公众号，面向前端爱好者， 每日更新最有料的文章，最前沿的资讯,内容包含但不限于Vue,React,Angular,前端工程化...等各种"<span style="max-width: 100%;color: rgb(216, 79, 169);box-sizing: border-box !important;word-wrap: break-word !important;">大保健</span>"知识点,右上角点关注,老司机带你弯道超车,不定期更有各种福利赠送</span>&nbsp;</p></section></section><p style="max-width: 100%;min-height: 1em;color: rgb(62, 62, 62);font-size: 16px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><br></p></section><p style="max-width: 100%;min-height: 1em;background-color: rgb(255, 255, 255);line-height: 25.6px;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;">FEweekly</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><section class="" data-tools="135编辑器" data-id="86357" data-color="rgb(89, 195, 249)" data-custom="rgb(89, 195, 249)" style="max-width: 100%;box-sizing: border-box;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;display: inline-block;width: 192px;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-ratio="0.125" data-src="http://mmbiz.qpic.cn/mmbiz/cZV2hRpuAPialHghKLjic2ibD7sFcuQ6wrakMrFv47qt1Lib5BD10KWLibRMLZbdQtY2TwasT3klmETSDmgXziaH3pOQ/640?" data-w="600" style="display: inline; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 192px !important; height: 24px !important;" title="墨迹晕染分割线" _width="192px" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" crossorigin="anonymous" alt="图片" width="192px"></section></section></section>
                
        </body>
        </html>