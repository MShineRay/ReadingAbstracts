<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Title</title>
        </head>
        <body>
                    <h2 class="" data-id="heading-0" style="box-sizing: border-box;margin-top: 1.6em;margin-bottom: 1.6em;font-weight: bold;font-size: 1.2em;color: rgb(62, 62, 62);line-height: inherit;letter-spacing: 2px;white-space: normal;word-spacing: 2px;background-color: rgb(255, 255, 255);">
                      <span style="box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;"></span></h2><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">
                      <span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">众所周知，JavaScript 浮点数运算时经常遇到会&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.000000001</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;和&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.999999999</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;这样奇怪的结果，如&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.1+0.2=0.30000000000000004</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">、</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1-0.9=0.09999999999999998</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，很多人知道这是浮点数误差问题，但具体就说不清楚了。本文帮你理清这背后的原理以及解决方案，还会向你解释JS中的大数危机和四则运算中会遇到的坑。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">浮点数的存储</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">首先要搞清楚 JavaScript 如何存储小数。和其它语言如 Java 和 Python 不同，JavaScript 中所有数字包括整数和小数都只有一种类型 —&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">Number</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">。它的实现遵循&nbsp;</span><span class="" style="max-width: 100%;color: rgb(1, 163, 176);box-sizing: border-box !important;overflow-wrap: break-word !important;">IEEE 754</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;标准，使用 64 位固定长度来表示，也就是标准的 double 双精度浮点数（相关的还有float 32位单精度）。计算机组成原理中有过详细介绍，如果你不记得也没关系。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">这样的存储结构优点是可以归一化处理整数和小数，节省存储空间。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">64位比特又可分为三个部分：</span></p><ul class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">符号位S：第 1 位是正负数符号位（sign），0代表正数，1代表负数</span></p></li></ul><ul class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">指数位E：中间的 11 位存储指数（exponent），用来表示次方数</span></p></li></ul><ul class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">尾数位M：最后的 52 位是尾数（mantissa），超出的部分自动进一舍零</span></p></li></ul><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">￼</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;display: block;width: 613px;min-height: 60px;border-width: 1px;border-style: solid;border-color: transparent;text-align: center;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="" data-ratio="0.16161616161616163" data-w="594" data-type="png" data-src="http://mmbiz.qpic.cn/mmbiz_png/1NOXMW586uuIgBAZ4vtRD5gBQGCibh4CFhsbw23g2wArqod2G89ia1MOBqNl8tePAibgN3EFF1FZBIMlwxodOHCZw/640?wx_fmt=png" style="border-width: 0px; border-style: initial; border-color: initial; cursor: default; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 594px !important; height: auto !important;" _width="594px" src="./0.1+0.2为什么不等于0.3_files/640" crossorigin="anonymous" alt="图片" data-fail="0"></span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">实际数字就可以用以下公式来计算：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">￼</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">$ V = (-1)^{S}\times M \times 2^{E} $</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">注意以上的公式遵循科学计数法的规范，在十进制是为0&lt;M&lt;10，到二进行就是0&lt;M&lt;2。也就是说整数部分只能是1，所以可以被舍去，只保留后面的小数部分。如 4.5 转换成二进制就是 100.1，科学计数法表示是 1.001*2^2，舍去1后&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">M = 001</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">。E是一个无符号整数，因为长度是11位，取值范围是 0~2047。但是科学计数法中的指数是可以为负数的，所以再减去一个中间数 1023，[0,1022]表示为负，[1024,2047] 表示为正。如4.5 的指数</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">E = 1025</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，尾数M为 001。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">最终的公式变成：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">$ V = (-1)^{S}\times (M+1) \times 2^{E-1023} $</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">所以&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">4.5</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;最终表示为（M=001、E=1025）：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">￼</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;display: block;width: 613px;min-height: 60px;border-width: 1px;border-style: solid;border-color: transparent;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="" data-ratio="0.180028129395218" data-w="1422" data-type="png" data-src="http://mmbiz.qpic.cn/mmbiz_png/1NOXMW586uuIgBAZ4vtRD5gBQGCibh4CFgFx1Asha8VkGcoBGdhNgXkR80CGD1N9rKODRKSY20uQmzIFEx8cxYA/640?wx_fmt=png" style="border-width: 0px; border-style: initial; border-color: initial; cursor: default; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;" _width="677px" src="./0.1+0.2为什么不等于0.3_files/640(1)" crossorigin="anonymous" alt="图片" data-fail="0"></span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">(图片由此生成&nbsp;</span><span class="" style="max-width: 100%;color: rgb(1, 163, 176);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">http://www.binaryconvert.com/convert_double.html</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">)</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">下面再以&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.1</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;例解释浮点误差的原因，&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.1</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;转成二进制表示为&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.0001100110011001100</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(1100循环)，</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.100110011001100x2^-4</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，所以&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">M=-4+1023=1019</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">；E 舍去首位的1，表示为&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">100110011...</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">。最终就是：</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;display: block;width: 613px;min-height: 60px;border-width: 1px;border-style: solid;border-color: transparent;text-align: center;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="" data-ratio="0.17739628040057226" data-w="1398" data-type="png" data-src="http://mmbiz.qpic.cn/mmbiz_png/1NOXMW586uuIgBAZ4vtRD5gBQGCibh4CFIvUGNrBGOJguKIoA27Sia4iazIHfia0w7NAc3hOhmToVbY4yLiapkSsXeQ/640?wx_fmt=png" style="border-width: 0px; border-style: initial; border-color: initial; cursor: default; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 677px !important; height: auto !important;" _width="677px" src="./0.1+0.2为什么不等于0.3_files/640(2)" crossorigin="anonymous" alt="图片" data-fail="0"></span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">￼</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">转化成十进制后为&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.100000000000000005551115123126</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，因此就出现了浮点误差。</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">为什么 0.1+0.2=0.30000000000000004</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">？</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">计算步骤为：</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(118, 92, 131);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">//</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;0.1 和 0.2 都转化成二进制后再进行运算</span></p></li></ol><ol start="2" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">0.00011001100110011001100110011001100110011001100110011010</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">+</span></span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">0.0011001100110011001100110011001100110011001100110011010</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">=</span></span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">0.0100110011001100110011001100110011001100110011001100111</span></span></p></li></ol><ol start="3" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">//</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;转成十进制正好是 0.30000000000000004</span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">为什么 x=0.1</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">&nbsp;能得到 0.1？</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">恭喜你到了看山不是山的境界。因为 mantissa 固定长度是 52 位，再加上省略的一位，最多可以表示的数是&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">2^53=9007199254740992</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，对应科学计数尾数是&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">9.007199254740992</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，这也是 JS 最多能表示的精度。它的长度是 16，所以可以使用&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">toPrecision(16)</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;来做精度运算，超过的精度会自动做凑整处理。于是就有：</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(55, 118, 166);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">0.10000000000000000555</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.</span><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">toPrecision</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">16</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">)&nbsp;</span></p></li></ol><ol start="2" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">//</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;返回 0.1000000000000000，去掉末尾的零后正好为 0.1</span></p></li></ol><ol start="3" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">//</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;但你看到的 `0.1` 实际上并不是 `0.1`。</span></p></li></ol><ol start="4" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></p></li></ol><ol start="5" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">不信你可用更高的精度试试：</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">0.1</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.</span><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">toPrecision</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">21</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">)&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">=</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">0.100000000000000005551</span></span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">大数危机</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">可能你已经隐约感觉到了，如果整数大于 9007199254740992 会出现什么情况呢？</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">由于 M 最大值是 1023，所以最大可以表示的整数是&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">2^1024 - 1</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">。这就是能表示的最大整数。但你并不能这样计算这个数字，因为从&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">2^1024</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;开始就变成了&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">Infinity</span></span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(213, 18, 40);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">Math</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">pow</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">2</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">,&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">1023</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">)&nbsp;</span></p></li></ol><ol start="2" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">8.98846567431158e+307</span></span></p></li></ol><ol start="3" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></p></li></ol><ol start="4" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">Math</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">pow</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">2</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">,&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">1024</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">)&nbsp;</span></p></li></ol><ol start="5" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">Infinity</span></span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;display: block;width: 613px;min-height: 60px;border-width: 1px;border-style: solid;border-color: transparent;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">那么对于&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">(2^53, 2^63)</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;之间的数会出现什么情况呢？</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">(2^53, 2^54)</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;之间的数会两个选一个，只能精确表示偶数</span></p></li></ol><ol start="2" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">(2^54, 2^55)</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;之间的数会四个选一个，只能精确表示4个倍数</span></p></li></ol><ul class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">... 依次跳过更多2的倍数</span></p></li></ul><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">下面这张图能很好的表示 JavaScript 中浮点数和实数（Real Number）之间的对应关系。我们常用的&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">(-2^53, 2^53)</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;只是最中间非常小的一部分，越往两边越稀疏越不精确。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;display: block;width: 613px;min-height: 60px;border-width: 1px;border-style: solid;border-color: transparent;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="" data-ratio="0.6571428571428571" data-w="595" data-type="jpeg" data-src="http://mmbiz.qpic.cn/mmbiz_jpg/1NOXMW586uuIgBAZ4vtRD5gBQGCibh4CF0PtNn3ulSo7etNWeJwWCIVlQnAJ0tVCQoLdDBY3tYpCFxPacOtYOGw/640?wx_fmt=jpeg" style="border-width: 0px; border-style: initial; border-color: initial; cursor: default; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 595px !important; height: auto !important;" _width="595px" src="./0.1+0.2为什么不等于0.3_files/640(3)" crossorigin="anonymous" alt="图片" data-fail="0"></span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">在淘宝早期的订单系统中把订单号当作数字处理，后来随意订单号暴增，已经超过了</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">9007199254740992</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，最终的解法是把订单号改成字符串处理。</span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">要想解决大数的问题你可以引用第三方库&nbsp;</span><span class="" style="max-width: 100%;color: rgb(1, 163, 176);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">bignumber.js</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，原理是把所有数字当作字符串，重新实现了计算逻辑，缺点是性能比原生的差很多。所以原生支持大数就很有必要了，现在 TC39 已经有一个 Stage 3 的提案&nbsp;</span><span class="" style="max-width: 100%;color: rgb(1, 163, 176);box-sizing: border-box !important;overflow-wrap: break-word !important;">proposal bigint</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，大数问题有问彻底解决。</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;font-size: 12pt !important;">toPrecision</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">&nbsp;vs toFixed</span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">数据处理时，这两个函数很容易混淆。它们的共同点是把数字转成字符串供展示使用。注意在计算的中间过程不要使用，只用于最终结果。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">不同点就需要注意一下：</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">toPrecision</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;是处理精度，精度是从左至右第一个不为0的数开始数起。</span></p></li></ol><ol start="2" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">toFixed</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;是小数点后指定位数取整，从小数点开始数起。</span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">两者都能对多余数字做凑整处理，也有些人用&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">toFixed</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;来做四舍五入，但一定要知道它是有 Bug 的。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">如：</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.005.toFixed(2)</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;返回的是&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.00</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;而不是&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.01</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">原因：&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.005</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;实际对应的数字是&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.00499999999999989</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，在四舍五入时全部被舍去！</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">解法：使用专业的四舍五入函数&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">Math.round()</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;来处理。但&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">Math.round(1.005 * 100) / 100</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;还是不行，因为&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.005 * 100 = 100.49999999999999</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">。还需要把乘法和除法精度误差都解决后再使用&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">Math.round</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">。可以使用后面介绍的&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">number-precision#round</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;方法来解决。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">解决方案</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">回到最关心的问题：如何解决浮点误差。首先，理论上用有限的空间来存储无限的小数是不可能保证精确的，但我们可以处理一下得到我们期望的结果。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">数据展示类</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">当你拿到&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">1.4000000000000001</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;这样的数据要展示时，建议使用&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">toPrecision</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;凑整并&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">parseFloat</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;转成数字后再显示，如下：</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">parseFloat(1.4000000000000001.toPrecision(12)) === 1.4&nbsp; // True&nbsp;</span></span></span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">封装成方法就是：</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(213, 18, 40);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">function</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">strip</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(num, precision&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">=</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">12</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">) {</span></p></li></ol><ol start="2" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">return</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">+</span></span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">parseFloat</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(num.</span><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">toPrecision</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(precision));</span></p></li></ol><ol start="3" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">}</span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">为什么选择&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">12</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;做为默认精度？这是一个经验的选择，一般选12就能解决掉大部分0001和0009问题，而且大部分情况下也够用了，如果你需要更精确可以调高。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><inherit style="max-width: 100%;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);box-sizing: border-box !important;overflow-wrap: break-word !important;font-size: 12pt !important;">数据运算类</span></inherit></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">对于运算类操作，如&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">+-*/</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">，就不能使用&nbsp;</span><span class="" style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">toPrecision</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;了。正确的做法是把小数转成整数后再运算。以加法为例：</span></p><ol start="1" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(118, 92, 131);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">/**</span></span></span><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">&nbsp;* 精确加法 */</span></span></p></li></ol><ol start="2" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">function</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(118, 92, 131);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">add</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(num1, num2) {</span></p></li></ol><ol start="3" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">const</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">num1Digits</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">=</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;(num1.</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">toString</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">().</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">split</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(</span><span class="" style="max-width: 100%;color: rgb(25, 78, 119);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">'</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.')[</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">1</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">]&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">||</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(25, 78, 119);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">'</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">').</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">length</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></p></li></ol><ol start="4" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">const</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">num2Digits</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">=</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;(num2.</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">toString</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">().</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">split</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(</span><span class="" style="max-width: 100%;color: rgb(25, 78, 119);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">'</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.')[</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">1</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">]&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">||</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(25, 78, 119);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">'</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">').</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">length</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></p></li></ol><ol start="5" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">const</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">baseNum</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">=</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">Math</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">pow</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">10</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">,&nbsp;</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">Math</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.</span><span class="" style="max-width: 100%;color: rgb(55, 118, 166);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">max</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(num1Digits, num2Digits));</span></p></li></ol><ol start="6" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">return</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;(num1&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">*</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;baseNum&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">+</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;num2&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">*</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;baseNum)&nbsp;</span><span class="" style="max-width: 100%;color: rgb(213, 18, 40);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgb(71, 82, 93) !important;">/</span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;baseNum;</span></p></li></ol><ol start="7" class="list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">}</span></p></li></ol><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">以上方法能适用于大部分场景。遇到科学计数法如&nbsp;</span><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 9pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">2.3e+1</span></span></span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">（当数字精度大于21时，数字会强制转为科学计数法形式显示）时还需要特别处理一下。</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">能读到这里，说明你非常有耐心，那我就放个福利吧。遇到浮点数误差问题时可以直接使用</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(1, 163, 176);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">https://github.com/dt-fe/number-precision</span></span></span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(43, 43, 43);font-size: 11pt;box-sizing: border-box !important;overflow-wrap: break-word !important;">完美支持浮点数的加减乘除、四舍五入等运算。非常小只有1K，远小于绝大多数同类库（如Math.js、BigDecimal.js），100%测试全覆盖，代码可读性强，不妨在你的应用里用起来！</span></p><p style="max-width: 100%;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></p><blockquote style="max-width: 100%;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">链接:https://github.com/camsong/blog/issues/9</p></blockquote><h3 style="margin-top: 1.6em;margin-bottom: 1.6em;font-weight: bold;font-size: 1.1em;max-width: 100%;box-sizing: border-box;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;white-space: normal;color: rgb(62, 62, 62);line-height: inherit;border-bottom: 2px solid rgb(239, 112, 96);letter-spacing: 2px;word-spacing: 2px;background-color: rgb(255, 255, 255);overflow-wrap: break-word !important;"><span style="margin-right: 3px;padding: 3px 10px 1px;max-width: 100%;box-sizing: border-box;font-size: inherit;color: rgb(255, 255, 255);line-height: inherit;display: inline-block;font-weight: normal;background: rgb(239, 112, 96);border-top-right-radius: 3px;border-top-left-radius: 3px;overflow-wrap: break-word !important;">近期精彩</span>&nbsp; &nbsp;<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></h3><p class="" style="margin-top: 1.7em;margin-bottom: 1.7em;margin-left: 25px;max-width: 100%;box-sizing: border-box;min-height: 1em;color: rgb(51, 51, 51);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box;font-size: inherit;color: inherit;line-height: inherit;display: block;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box;color: inherit;font-size: inherit;line-height: inherit;display: block;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzIyMDkwODczNw==&amp;mid=2247484191&amp;idx=1&amp;sn=dd5a5ee8dc21314768ff18a5a67f0ea0&amp;chksm=97c59eb1a0b217a72d0769a670552a10dfddd649f97ad87fe79c2f5f5ae50b43200c42e1a726&amp;scene=21#wechat_redirect" target="_blank">[译] 尤雨溪：Vue 3.0 计划</a><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"></span><span class="" style="max-width: 100%;box-sizing: border-box;color: inherit;font-size: inherit;line-height: inherit;display: block;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzIyMDkwODczNw==&amp;mid=2247484197&amp;idx=1&amp;sn=2c49f2289e40e4e4da8e15543c597bfe&amp;chksm=97c59e8ba0b2179d6183028e74d78636b047bef71c8d949e8fc3d6c7a2f5ceecb8961c6b9100&amp;scene=21#wechat_redirect" target="_blank">如何轻松拿到淘宝前端 offer</a><br></span></span></p><p><br></p>
                
        </body>
        </html>