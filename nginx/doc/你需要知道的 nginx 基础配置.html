<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Title</title>
        </head>
        <body>
        
                    

                    
                    
                    
                    <h2 data-id="heading-0" style="color: rgb(51, 51, 51);line-height: 1.5;margin-top: 35px;margin-bottom: 10px;padding-bottom: 12px;font-size: 24px;border-bottom: 1px solid rgb(236, 236, 236);">初探nginx</h2><blockquote style="margin-top: 22px;margin-bottom: 22px;border-left-width: 4px;border-left-color: rgb(203, 203, 203);padding: 1px 23px;color: rgb(102, 102, 102);background-color: rgb(248, 248, 248);"><p style="line-height: inherit;margin-top: 10px;margin-bottom: 10px;">今天给大家讲下nginx的基础配置,很多小伙伴在开发的过程中会使用到 nginx ,但是确对 nginx 的配置其实并不了解,今天我给大家讲下基础的配置项.nginx 的功能很多,但是说到 nginx 大家最先想到的是反向代理和负载均衡.</p></blockquote><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">“负载均衡”在开发环境体现的不太明显,主要是为了解决生产环境的客户端请求很多的时候,动态的去分散给各个服务器,缓解服务器压力,充 分利用资源.而说到 “反向代理”,你的第一反应应该是”正向代理”,简称”代理”,你可以把代理想象成客户端和服务端的中介,代理的种类很多,比较常见的是,客户端对服务端进行请求的时候,代理会对请求的内容进行下载缓存,从而提高客户端的请求速度,代理还有多重代理,加密处理等功能,”反向代理”的作用和正项代理的功能相辅相成,原理也类似,反向代理将字符串和相应的服务器和端口匹配上,从而获取用户想要获取的内容,那么这两者的区分是什么呢,”正向代理”作用于客户端,”反向代理”作用于服务器.</p><h2 data-id="heading-1" style="color: rgb(51, 51, 51);line-height: 1.5;margin-top: 35px;margin-bottom: 10px;padding-bottom: 12px;font-size: 24px;border-bottom: 1px solid rgb(236, 236, 236);">生动的 nginx 反向代理解释</h2><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">为了让大家能够更加深刻的理解代理和反向代理的模式,我们引用下知乎上车小胖的回答</p><blockquote style="margin-top: 22px;margin-bottom: 22px;border-left-width: 4px;border-left-color: rgb(203, 203, 203);padding: 1px 23px;color: rgb(102, 102, 102);background-color: rgb(248, 248, 248);"><p style="line-height: inherit;margin-top: 10px;margin-bottom: 10px;">有了第三方订餐外卖平台（代理），老王懒得动身前往饭店，老王打个电话或用APP，先选好某个饭店，再点好菜，外卖小哥会送上门来。由于某个品牌的饭店口碑特别好，食客络绎不绝涌入，第三方订餐电话也不绝于耳，但是限于饭店接待能力有限，无法提供及时服务，很多食客等得不耐烦了，纷纷铩羽而归，饭店老总看着煮熟的鸭子飞走了，心疼不已。痛定思痛，老总又成立了几个连锁饭店，形成一个集群，对外提供统一标准的菜品服务，电话订餐电话400-xxx-7777，当食客涌入饭店总台，总台将食客用大巴运到各个连锁店，这样食客既不需要排队，各连锁店都能高速运转起来，一举两得，老总乐开了花，并为此种运作模式起名为“反向代理”（Reverse Proxy)。</p></blockquote><h2 data-id="heading-2" style="color: rgb(51, 51, 51);line-height: 1.5;margin-top: 35px;margin-bottom: 10px;padding-bottom: 12px;font-size: 24px;border-bottom: 1px solid rgb(236, 236, 236);">nginx 基础配置</h2><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">好了,了解了 nginx 的一些概念之后,我们要开始切入今天的主题,”ngix 的基础配置”,安装好 nginx 配置之后,你对 nginx 的配置都写在 nginx.conf 的文件里,从 nginx 的配置指令作用域来讲,我们分为 5 个作用域块,分别是:</p><ul style="" class="list-paddingleft-2"><li><p>全局作用域块</p></li><li><p>event 作用域块</p></li><li><p>http 指令作用域块</p></li><li><p>server 指令作用域块</p></li><li><p>location 指令作用域块</p></li></ul><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);"><img class="" data-height="641" data-ratio="1.0158478605388273" data-src="https://mmbiz.qpic.cn/mmbiz/1NOXMW586uuAq7CZZV0TzVB0ibEPEokIBm15IDqibn1ro3WfQvk62KoSZUeBJxXyXTKjDJ7PltBzAKfInz69Wgng/640?wx_fmt=other" data-type="other" data-w="631" data-width="631" style="border-style: none; max-height: none; background-color: transparent; background-position: 50% center; background-repeat: no-repeat; cursor: zoom-in; visibility: visible !important; width: 631px !important; height: auto !important;" _width="631px" src="./你需要知道的 nginx 基础配置_files/640" crossorigin="anonymous" alt="图片" data-fail="0"></p><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">在 “全局作用域块” 作用域块中配置通用的nginx 配置,比如 nginx 的用户组信息,nginx 的并发进程数,日志存放位置等,nginx 的用户组信息配置,用来控制启动 nginx 的权限,服务并发一般情况下是越多越好,但是当超过硬件的承受范围时会适得其反,所以一般我们会配置为 auto,这样 nginx 会去检查硬件的信息,启用适当的进程数量.</p><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">日志存放位置你也可以配置在 http 作用域块,”http 作用域块”作用域通常是配置请求相关的内容,比如数据的传输,对同一个接口的请求次数上线,配置请求的潮湿时间,还有是否要对请求进行 gzip 压缩等.在之前讲 web性能优化的时候,我记得和大家讲过 gzip 压缩是提高 web 性能优化的一种手段,gzip 能对 http 请求的请求头和请求体进行压缩,从而达到优化.但是不是所有的请求都要去压缩,有些压缩之后的请求体积可能会更大,从而达不到压缩的效果.那怎么办呢,在 nginx 的配置中,你可以进行配置,设置当请求大于一定值的时候,才触发 gzip 压缩 gzip 的内容这里就深入讲解了,想要了解的同学可以去谷歌下,或则在下次 nginx 的高级配置的分享的时候我们再来细讲.</p><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">在 event 模块我们通常会配置进程的连接数量,就是每一个worker进程能并发处理（发起）的最大连接数.在 “server 指令作用域块” 我们可以进行独立项目的代理配置,</p><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">一个 http 指令中可以包含多个 server ,每一个 server 你可以看做是一个虚拟机,部署过网站的同学应该知道,若果你没有做代理,你的服务器只能部署一个项目的内容,默认是80端口,使用代理,能将客户端的请求根据端口作为区分,发散到不同的项目中.nginx 这一点,能让我们更好的利用服务器资源</p><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">在server 指令中,我们同样可以配置多个 location 指令,location 指令能将我们的字符串请求解析到对应的IP和端口,从而去获取正确的资源,location 也可以进行特殊配置,定制 网站的 404 ,500 等页面.</p><h2 data-id="heading-3" style="color: rgb(51, 51, 51);line-height: 1.5;margin-top: 35px;margin-bottom: 10px;padding-bottom: 12px;font-size: 24px;border-bottom: 1px solid rgb(236, 236, 236);">nginx 的项目配置示例</h2><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);"><img class="" data-height="605" data-ratio="1.010016694490818" data-src="https://mmbiz.qpic.cn/mmbiz/1NOXMW586uuAq7CZZV0TzVB0ibEPEokIBHP26ZuwrtW7icicib767234X1dBdlvkb28icCxp2AT9sP6ow5CXiaib9Jhbw/640?wx_fmt=other" data-type="other" data-w="599" data-width="599" style="border-style: none; max-height: none; background-color: transparent; background-position: 50% center; background-repeat: no-repeat; cursor: zoom-in; visibility: visible !important; width: 599px !important; height: auto !important;" _width="599px" src="./你需要知道的 nginx 基础配置_files/640(1)" crossorigin="anonymous" alt="图片" data-fail="0"><br><img class="img_loading" data-height="608" data-ratio="1.0133333333333334" data-src="https://mmbiz.qpic.cn/mmbiz/1NOXMW586uuAq7CZZV0TzVB0ibEPEokIBciaIbPlsgfibr5icxSFJoVBgnXocDOecJVdbnliaf5MtDibaiayqCicg8Wylg/640?wx_fmt=other" data-type="other" data-w="600" data-width="600" style="border-style: none; max-height: none; visibility: visible; background-color: transparent; background-position: 50% center; background-repeat: no-repeat; cursor: zoom-in; width: 600px !important; height: 608px !important;" _width="600px" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" crossorigin="anonymous" alt="图片"><br>我们简单的看下,我目前使用到的两个项目的 nginx 配置,在fengdai_pc 项目中我们通过 listen 来配置项目监听端口,通过 root 来配置前端项目文件的地址,我们还通过 location 来配置了几个模块代理,account 和 funds ,定制了 404 页面,在 另一个 nginx 配置项目中我们做了https 配置,配置了域名&nbsp;<code style=";">baibatianpc.com</code>,并且指定了证书的位置,这样配置后,我们能通过 访问&nbsp;baibatianpc.com/&nbsp;来查看我们的项目.这里对于如何搭建 https 环境就不细讲了,不同的开发系统证书的获取和配置方式也不太一样,想要深入了解的同学继续谷歌.</p><h2 data-id="heading-4" style="color: rgb(51, 51, 51);line-height: 1.5;margin-top: 35px;margin-bottom: 10px;padding-bottom: 12px;font-size: 24px;border-bottom: 1px solid rgb(236, 236, 236);">复习</h2><p style="line-height: inherit;margin-top: 22px;margin-bottom: 22px;color: rgb(51, 51, 51);">好了,我们今天讲了nginx 的基础配置,我们现在来复习一下,我们今天讲的知识点有哪些</p><ol style="" class="list-paddingleft-2"><li><p>nginx 常用的功能的概念,负载均衡,反向代理</p></li><li><p>nginx 指令配置的5个作用域空间</p></li><li><p>nginx 的每个配置作用域的基础配置项目</p></li><li><p>简单的两个项目配置示例</p></li></ol><p><br></p><blockquote><p>作者:&nbsp;<span style="color: rgb(51, 51, 51);"><span class="" style="box-sizing: border-box;color: rgb(73, 177, 245);font-weight: 700;">&nbsp;</span><span class="" style="box-sizing: border-box;color: rgb(76, 73, 72);">bailinlin</span></span>&nbsp;&nbsp;<br></p><p>https://bailinlin.github.io</p></blockquote><p><br></p><section class="" data-tools="135编辑器" data-id="87989" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section class="__bg_gif" data-order="0" style="padding: 30px;max-width: 100%;box-sizing: border-box;border-width: 3px;border-style: double;border-color: rgb(145, 44, 238);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_gif/cZV2hRpuAPjTw2iacM6RJGggO7nTficztvMrrFT6d8NaeExPXJllNbrdTnibB8Jnuwcfcp0599X9g5aGmPDlADN3w/640&quot;);word-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 20px;color: rgb(216, 79, 169);box-sizing: border-box !important;word-wrap: break-word !important;">Vue中文社区</span><span style="max-width: 100%;color: rgb(0, 128, 255);font-size: 20px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span><span style="max-width: 100%;color: rgb(0, 128, 255);font-size: 12px;box-sizing: border-box !important;word-wrap: break-word !important;">独家公众号，面向前端爱好者， 每日更新最有料的文章，最前沿的资讯,内容包含但不限于Vue,React,Angular,前端工程化...等各种"<span style="max-width: 100%;color: rgb(216, 79, 169);box-sizing: border-box !important;word-wrap: break-word !important;">大保健</span>"知识点,右上角点关注,老司机带你弯道超车,不定期更有各种福利赠送</span>&nbsp;</p></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p><p style="max-width: 100%;min-height: 1em;background-color: rgb(255, 255, 255);line-height: 25.6px;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(84, 141, 212);box-sizing: border-box !important;word-wrap: break-word !important;">FEweekly</span></p><p><br></p><section class="" data-tools="135编辑器" data-id="86357" data-color="rgb(89, 195, 249)" data-custom="rgb(89, 195, 249)" style="max-width: 100%;box-sizing: border-box;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;word-wrap: break-word !important;"><section style="max-width: 100%;text-align: center;box-sizing: border-box !important;word-wrap: break-word !important;"><section style="max-width: 100%;display: inline-block;width: 192px;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-ratio="0.125" data-src="http://mmbiz.qpic.cn/mmbiz/cZV2hRpuAPialHghKLjic2ibD7sFcuQ6wrakMrFv47qt1Lib5BD10KWLibRMLZbdQtY2TwasT3klmETSDmgXziaH3pOQ/640?" data-w="600" style="display: inline; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 192px !important; height: 24px !important;" title="墨迹晕染分割线" width="192px" _width="192px" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" crossorigin="anonymous" alt="图片"></section></section></section>
                
        </body>
        </html>